import{r as i,j as e,a as p,d as f,b as y,R as j}from"./storage-DUrBQEha.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();const N=({notes:n,onDelete:o,onJumpTo:a})=>{const[s,t]=i.useState(null);return n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No notes found."}),e.jsx("p",{className:"text-xs mt-2",children:"Highlight text on any page and right-click to add a note."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:n.map(r=>e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border border-gray-100 hover:border-green-200 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate max-w-[200px] block",title:r.url,children:new URL(r.url).hostname}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(r.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"mb-2 text-xs text-gray-500 italic border-l-2 border-yellow-400 pl-2 line-clamp-2",children:['"',r.selectedText,'"']}),e.jsx("p",{className:"text-sm text-gray-800 mb-3 line-clamp-3",children:r.content}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>t(r),className:"text-xs text-green-600 hover:text-green-700 font-medium px-3 py-1 rounded hover:bg-green-50 transition-colors border border-green-200 hover:border-green-300",children:"View Full Note"}),e.jsx("button",{onClick:()=>o(r.id),className:"text-xs text-red-500 hover:text-red-700 font-medium px-3 py-1 rounded hover:bg-red-50 transition-colors border border-red-200 hover:border-red-300",children:"Delete"})]})]},r.id))}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>t(null),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-white font-bold text-lg flex items-center gap-2",children:"ðŸ“ Full Note Details"}),e.jsx("button",{onClick:()=>t(null),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-2 transition-colors",title:"Close",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 block",children:"Page URL"}),e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline break-all",children:s.url})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 block",children:"Highlighted Text"}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-gray-800 italic",children:['"',s.selectedText,'"']})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 block",children:"Your Note"}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:s.content})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 block",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-700",children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 block",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-700",children:new Date(s.updatedAt||s.createdAt).toLocaleString()})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{window.open(s.url,"_blank")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open Page"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t(null),className:"text-sm text-gray-600 hover:text-gray-700 font-medium px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this note?")&&(o(s.id),t(null))},className:"text-sm text-white bg-red-500 hover:bg-red-600 font-medium px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Note"]})]})]})]})})]})},v=()=>{const[n,o]=i.useState([]),[a,s]=i.useState(""),[t,r]=i.useState("current"),[c,h]=i.useState("");i.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},l=>{l[0]&&h(l[0].url)}),x()},[]);const x=async()=>{const l=await p();o(l)},g=async l=>{window.confirm("Are you sure you want to delete this note?")&&(await f(l),await x(),chrome.tabs.query({active:!0,currentWindow:!0},d=>{d[0]&&chrome.tabs.sendMessage(d[0].id,{type:"NOTE_DELETED",payload:{id:l}})}))},b=n.filter(l=>{if(!(l.content.toLowerCase().includes(a.toLowerCase())||l.selectedText.toLowerCase().includes(a.toLowerCase())||l.url.toLowerCase().includes(a.toLowerCase())))return!1;if(t==="current")try{const u=new URL(l.url),m=new URL(c);return u.hostname===m.hostname&&u.pathname===m.pathname}catch{return!1}return!0});return e.jsxs("div",{className:"w-[400px] h-[500px] bg-gray-50 flex flex-col font-sans",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 p-4 shadow-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸ“"})," ContextMemo"]}),e.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[n.length," notes"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search notes...",value:a,onChange:l=>s(l.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 absolute left-3 top-2.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200 bg-white",children:[e.jsxs("button",{onClick:()=>r("current"),className:`flex-1 py-2 text-sm font-medium transition-colors relative ${t==="current"?"text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["Current Page",t==="current"&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-green-600"})]}),e.jsxs("button",{onClick:()=>r("all"),className:`flex-1 py-2 text-sm font-medium transition-colors relative ${t==="all"?"text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["All Notes",t==="all"&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-green-600"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(N,{notes:b,onDelete:g})}),e.jsx("footer",{className:"bg-white border-t border-gray-200 p-3 text-center text-xs text-gray-400",children:"Right-click on any selected text to add a note"})]})};y.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(v,{})}));
